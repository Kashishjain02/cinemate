{% extends 'account/base.html' %} {%load static%} {% block title%} My Portfolio
{%endblock%} {% block head%}
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{%endblock%} {% block body%}

<!-- ============================================================== -->
<!-- Bread crumb and right sidebar toggle -->
<!-- ============================================================== -->
<div class="page-breadcrumb">
    <div class="row">
        <div class="col-5 align-self-center">
            <h4 class="page-title">Dashboard</h4>
        </div>
        <div class="col-7 align-self-center">
            <div class="d-flex align-items-center justify-content-end">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="#">Home</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">
                            Dashboard
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- ============================================================== -->
<!-- End Bread crumb and right sidebar toggle -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Container fluid  -->
<!-- ============================================================== -->
<div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Email campaign chart -->
    <!-- ============================================================== -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Sales Ratio</h4>
                    <canvas id="myChart" style="height: 200px"></canvas>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-1">Earnings</h5>
                    <h3 class="font-light">₹ {{freelancer.earning}}</h3>
                    <div class="mt-3 text-center">
                        <div id="earnings"></div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-0">Total Projects</h4>
                    <h2 class="font-light">
                        {% with upcoming_orders|length as length1 %} 
                            {% with orders|length as length2 %} 
                                {% with total_length=length1|add:length2 %} 
                                    {{ total_length }} 
                                {% endwith %} 
                            {% endwith %}
                        {%endwith%}
                        <!-- <span class="font-16 text-success font-medium"
                            >+23%</span
                        > -->
                    </h2>
                    <div class="mt-4">
                        <div class="row text-center">
                            <div class="col-6 border-right">
                                <h4 class="mb-0">{{upcoming_orders|length}}</h4>
                                <span class="font-14 text-muted"
                                    >New Projects</span
                                >
                            </div>
                            <div class="col-6">
                                <h4 class="mb-0">{{orders|length}}</h4>
                                <span class="font-14 text-muted"
                                    >Previous projects</span
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Email campaign chart -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Ravenue - page-view-bounce rate -->
    <!-- ============================================================== -->
    <div class="row">
        <!-- column -->
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Latest Sales</h4>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th class="border-top-0">NAME</th>
                                <th class="border-top-0">STATUS</th>
                                <th class="border-top-0">DATE</th>
                                <th class="border-top-0">PRICE</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="txt-oflo">Elite admin</td>
                                <td>
                                    <span
                                        class="label label-success label-rounded"
                                        >SALE</span
                                    >
                                </td>
                                <td class="txt-oflo">April 18, 2021</td>
                                <td>
                                    <span class="font-medium">$24</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="txt-oflo">Real Homes WP Theme</td>
                                <td>
                                    <span class="label label-info label-rounded"
                                        >EXTENDED</span
                                    >
                                </td>
                                <td class="txt-oflo">April 19, 2021</td>
                                <td>
                                    <span class="font-medium">$1250</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="txt-oflo">Ample Admin</td>
                                <td>
                                    <span
                                        class="label label-purple label-rounded"
                                        >Tax</span
                                    >
                                </td>
                                <td class="txt-oflo">April 19, 2021</td>
                                <td>
                                    <span class="font-medium">$1250</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="txt-oflo">Medical Pro WP Theme</td>
                                <td>
                                    <span
                                        class="label label-success label-rounded"
                                        >Sale</span
                                    >
                                </td>
                                <td class="txt-oflo">April 20, 2021</td>
                                <td>
                                    <span class="font-medium">-$24</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="txt-oflo">Hosting press html</td>
                                <td>
                                    <span
                                        class="label label-success label-rounded"
                                        >SALE</span
                                    >
                                </td>
                                <td class="txt-oflo">April 21, 2021</td>
                                <td>
                                    <span class="font-medium">$24</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="txt-oflo">Digital Agency PSD</td>
                                <td>
                                    <span
                                        class="label label-danger label-rounded"
                                        >Tax</span
                                    >
                                </td>
                                <td class="txt-oflo">April 23, 2021</td>
                                <td>
                                    <span class="font-medium">-$14</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Ravenue - page-view-bounce rate -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Recent comment and chats -->
    <!-- ============================================================== -->
    <div class="row">
        <!-- column -->
        <div class="col-lg-6">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Recent Comments</h4>
                </div>
                <div class="comment-widgets" style="height: 430px">
                    <!-- Comment Row -->
                    <div class="d-flex flex-row comment-row mt-0">
                        <div class="p-2">
                            <img
                                src="../../assets/images/users/1.jpg"
                                alt="user"
                                width="50"
                                class="rounded-circle" />
                        </div>
                        <div class="comment-text w-100">
                            <h6 class="font-medium">James Anderson</h6>
                            <span class="mb-3 d-block"
                                >Lorem Ipsum is simply dummy text of the
                                printing and type setting industry.
                            </span>
                            <div class="comment-footer">
                                <span class="text-muted float-end"
                                    >April 14, 2021</span
                                >
                                <span class="label label-rounded label-primary"
                                    >Pending</span
                                >
                                <span class="action-icons">
                                    <a href="javascript:void(0)">
                                        <i class="ti-pencil-alt"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-check"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-heart"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- Comment Row -->
                    <div class="d-flex flex-row comment-row">
                        <div class="p-2">
                            <img
                                src="../../assets/images/users/4.jpg"
                                alt="user"
                                width="50"
                                class="rounded-circle" />
                        </div>
                        <div class="comment-text active w-100">
                            <h6 class="font-medium">Michael Jorden</h6>
                            <span class="mb-3 d-block"
                                >Lorem Ipsum is simply dummy text of the
                                printing and type setting industry.
                            </span>
                            <div class="comment-footer">
                                <span class="text-muted float-end"
                                    >April 14, 2021</span
                                >
                                <span class="label label-success label-rounded"
                                    >Approved</span
                                >
                                <span class="action-icons active">
                                    <a href="javascript:void(0)">
                                        <i class="ti-pencil-alt"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="icon-close"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-heart text-danger"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- Comment Row -->
                    <div class="d-flex flex-row comment-row">
                        <div class="p-2">
                            <img
                                src="../../assets/images/users/5.jpg"
                                alt="user"
                                width="50"
                                class="rounded-circle" />
                        </div>
                        <div class="comment-text w-100">
                            <h6 class="font-medium">Johnathan Doeting</h6>
                            <span class="mb-3 d-block"
                                >Lorem Ipsum is simply dummy text of the
                                printing and type setting industry.
                            </span>
                            <div class="comment-footer">
                                <span class="text-muted float-end"
                                    >April 14, 2021</span
                                >
                                <span class="label label-rounded label-danger"
                                    >Rejected</span
                                >
                                <span class="action-icons">
                                    <a href="javascript:void(0)">
                                        <i class="ti-pencil-alt"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-check"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-heart"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- Comment Row -->
                    <div class="d-flex flex-row comment-row mt-0">
                        <div class="p-2">
                            <img
                                src="../../assets/images/users/2.jpg"
                                alt="user"
                                width="50"
                                class="rounded-circle" />
                        </div>
                        <div class="comment-text w-100">
                            <h6 class="font-medium">Steve Jobs</h6>
                            <span class="mb-3 d-block"
                                >Lorem Ipsum is simply dummy text of the
                                printing and type setting industry.
                            </span>
                            <div class="comment-footer">
                                <span class="text-muted float-end"
                                    >April 14, 2021</span
                                >
                                <span class="label label-rounded label-primary"
                                    >Pending</span
                                >
                                <span class="action-icons">
                                    <a href="javascript:void(0)">
                                        <i class="ti-pencil-alt"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-check"></i>
                                    </a>
                                    <a href="javascript:void(0)">
                                        <i class="ti-heart"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- column -->
        <div class="col-lg-6">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Temp Guide</h4>
                    <div class="d-flex align-items-center flex-row mt-4">
                        <div class="display-5 text-info">
                            <i class="wi wi-day-showers"></i>
                            <span>73<sup>°</sup></span>
                        </div>
                        <div class="ms-2">
                            <h3 class="mb-0">Saturday</h3>
                            <small>Ahmedabad, India</small>
                        </div>
                    </div>
                    <table class="table no-border mini-table mt-3">
                        <tbody>
                            <tr>
                                <td class="text-muted">Wind</td>
                                <td class="font-medium">ESE 17 mph</td>
                            </tr>
                            <tr>
                                <td class="text-muted">Humidity</td>
                                <td class="font-medium">83%</td>
                            </tr>
                            <tr>
                                <td class="text-muted">Pressure</td>
                                <td class="font-medium">28.56 in</td>
                            </tr>
                            <tr>
                                <td class="text-muted">Cloud Cover</td>
                                <td class="font-medium">78%</td>
                            </tr>
                        </tbody>
                    </table>
                    <ul class="row list-style-none text-center mt-4">
                        <li class="col-3">
                            <h4 class="text-info">
                                <i class="wi wi-day-sunny"></i>
                            </h4>
                            <span class="d-block text-muted">09:30</span>
                            <h3 class="mt-1">70<sup>°</sup></h3>
                        </li>
                        <li class="col-3">
                            <h4 class="text-info">
                                <i class="wi wi-day-cloudy"></i>
                            </h4>
                            <span class="d-block text-muted">11:30</span>
                            <h3 class="mt-1">72<sup>°</sup></h3>
                        </li>
                        <li class="col-3">
                            <h4 class="text-info">
                                <i class="wi wi-day-hail"></i>
                            </h4>
                            <span class="d-block text-muted">13:30</span>
                            <h3 class="mt-1">75<sup>°</sup></h3>
                        </li>
                        <li class="col-3">
                            <h4 class="text-info">
                                <i class="wi wi-day-sprinkle"></i>
                            </h4>
                            <span class="d-block text-muted">15:30</span>
                            <h3 class="mt-1">76<sup>°</sup></h3>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- Recent comment and chats -->
    <!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Container fluid  -->
<!-- ============================================================== -->

<script>
    // Get the canvas element
    var ctx = document.getElementById('myChart').getContext('2d');
  
    // Fetch data points from the API
    fetch('http://127.0.0.1:8000/account/api/monthly-report/')
      .then(response => response.json())
      .then(data => {
        // Extract labels and values from the API response
        var labels = Object.keys(data);
        var values = Object.values(data);
  
        // Define the data for the chart
        var chartData = {
          labels: labels,
          datasets: [{
            label: 'Sample Dataset',
            data: values,
            backgroundColor: 'rgba(54, 162, 235, 0.5)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        };
  
        // Create the chart using Chart.js
        var myChart = new Chart(ctx, {
          type: 'bar',
          data: chartData,
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  </script>

<!-- <script>
    // Get the canvas element
    var ctx = document.getElementById("myChart").getContext("2d");

    // Define the data for the chart
    var data = {
        labels: ["January", "February", "March", "April", "May", "June"],
        datasets: [
            {
                label: "Monthly earnings",
                data: [12, 99, 3, 5, 2, 3],
                backgroundColor: "rgba(54, 162, 235, 0.5)",
                borderColor: "rgba(54, 162, 235, 1)",
                borderWidth: 1,
            },
        ],
    };

    // Create the chart using Chart.js
    var myChart = new Chart(ctx, {
        type: "bar",
        data: data,
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                },
            },
        },
    });
</script> -->

{%endblock%}
